<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zonal Manager Portal</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Status badges */
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        .status-active {
            background-color: #d1fae5;
            color: #065f46;
        }
        .status-inactive {
            background-color: #e5e7eb;
            color: #4b5563;
        }
        .status-suspended {
            background-color: #fef9c3;
            color: #b45309;
        }
        .status-terminated {
            background-color: #fee2e2;
            color: #b91c1c;
        }
        .status-excellent {
            background-color: #065f46;
            color: white;
        }
        .status-good {
            background-color: #166534;
            color: white;
        }
        .status-average {
            background-color: #b45309;
            color: white;
        }
        .status-poor {
            background-color: #991b1b;
            color: white;
        }

        /* Chart container styling for responsiveness */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }

        /* Progress bar */
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 4px;
        }

        /* Content section display */
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }

        /* Navigation item active state */
        .nav-item.active {
            background-color: #1e40af;
        }

        /* Badges */
        .badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        .badge-primary {
            background-color: #dbeafe;
            color: #1e40af;
        }
        .badge-success {
            background-color: #dcfce7;
            color: #166534;
        }
        .badge-warning {
            background-color: #fef9c3;
            color: #854d0e;
        }
        .badge-danger {
            background-color: #fee2e2;
            color: #991b1b;
        }

        /* Tab button active state */
        .tab-button.active {
            background-color: #1e40af;
            color: white;
        }

        /* Modal styling */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: white;
            border-radius: 0.5rem;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="flex">
        <!-- Sidebar Navigation -->
        <div class="w-64 bg-blue-800 text-white min-h-screen p-4">
            <div class="flex items-center justify-between mb-8 mt-4">
                <h1 class="text-xl font-bold">Zonal Manager</h1>
            </div>

            <!-- Profile -->
            <div class="bg-blue-700 p-4 rounded-lg mb-6">
                <div class="flex items-center mb-3">
                    <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-xl font-bold mr-3">ZM</div>
                    <div>
                        <p class="font-medium">Zone Director</p>
                        <p class="text-sm text-blue-200">ZM-5001</p>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="status-badge status-active">Active</span>
                    <span class="text-sm">Eastern Zone</span>
                </div>
            </div>

            <nav>
                <ul>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700 active" onclick="showSection(event, 'dashboard')">
                            <i class="fas fa-tachometer-alt mr-2"></i> Zone Dashboard
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'account-developers')">
                            <i class="fas fa-user-shield mr-2"></i> Account Developers
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'aggregators')">
                            <i class="fas fa-users mr-2"></i> Aggregators
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'asrs')">
                            <i class="fas fa-user-tie mr-2"></i> ASRs
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'agents')">
                            <i class="fas fa-user-friends mr-2"></i> Agents
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'merchants')">
                            <i class="fas fa-store mr-2"></i> Merchants
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'sales-team-overview')">
                            <i class="fas fa-chart-line mr-2"></i> Sales Team
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'freelancer-performance')">
                            <i class="fas fa-user-tag mr-2"></i> Freelancers
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'customer-base-zonal')">
                            <i class="fas fa-users-cog mr-2"></i> Customer Base
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'performance')">
                            <i class="fas fa-chart-line mr-2"></i> Performance Metrics
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-item block p-2 rounded hover:bg-blue-700" onclick="showSection(event, 'reports')">
                            <i class="fas fa-file-alt mr-2"></i> Reports
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-8">
            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Zone Performance Dashboard</h2>
                    <div class="flex items-center space-x-4">
                        <div class="bg-white p-2 rounded-lg shadow">
                            <span class="text-gray-500 mr-2">Zone:</span>
                            <span class="font-medium">Eastern Zone</span>
                        </div>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700" onclick="logout()">
                            <i class="fas fa-sign-out-alt mr-2"></i> Logout
                        </button>
                    </div>
                </header>

                <!-- Zone Performance Summary -->
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Total Transactions</p>
                        <p class="text-2xl font-bold mt-1">12,842</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 18%</span>
                            <span class="text-sm text-gray-500">from last month</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Transaction Value</p>
                        <p class="text-2xl font-bold mt-1">TZS 2.14M</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 22%</span>
                            <span class="text-sm text-gray-500">from last month</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Active Agents</p>
                        <p class="text-2xl font-bold mt-1">428</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 8%</span>
                            <span class="text-sm text-gray-500">from last month</span>
                        </div>
                    </div>
                     <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Total Registrations</p>
                        <p class="text-2xl font-bold mt-1">7,540</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 15%</span>
                            <span class="text-sm text-gray-500">vs last month</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Zone Performance</p>
                        <p class="text-2xl font-bold mt-1">4.2/5</p>
                        <p class="text-sm text-gray-500 mt-2">
                            <span class="status-badge status-good">Good</span>
                        </p>
                    </div>
                </div>

                <!-- Zone Overview -->
                <div class="bg-white p-6 rounded-xl shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4">Zone Overview</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <h4 class="font-medium mb-3">Transaction Breakdown</h4>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-gray-500">Cash Out</p>
                                        <p class="text-xl font-bold">TZS 1.42M</p>
                                        <p class="text-sm text-gray-500">8,428 transactions</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-500">Cash In</p>
                                        <p class="text-xl font-bold">TZS 720K</p>
                                        <p class="text-sm text-gray-500">4,414 transactions</p>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <p class="text-gray-500">Avg. Transaction</p>
                                    <p class="text-xl font-bold">TZS 167</p>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-medium mb-3">Network Composition</h4>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-gray-500">Account Developers</p>
                                        <p class="text-xl font-bold">4</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-500">Aggregators</p>
                                        <p class="text-xl font-bold">12</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-500">ASRs</p>
                                        <p class="text-xl font-bold">48</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-500">Agents</p>
                                        <p class="text-xl font-bold">428</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-medium mb-3">Monthly Performance Trend</h4>
                            <div class="chart-container">
                                <canvas id="zonePerformanceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Performing Account Developers -->
                <div class="bg-white p-6 rounded-xl shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4">Top Performing Account Developers</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-3">1</div>
                                <div>
                                    <p class="font-medium">Regional Manager</p>
                                    <p class="text-sm text-gray-500">AD-4001</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-gray-500 text-sm">Aggregators</p>
                                    <p class="font-bold">8/10</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Performance</p>
                                    <p class="font-bold">4.5/5</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Transactions</p>
                                    <p class="font-bold">3,842</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Value</p>
                                    <p class="font-bold">TZS 642K</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-3">2</div>
                                <div>
                                    <p class="font-medium">Area Supervisor</p>
                                    <p class="text-sm text-gray-500">AD-4002</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-gray-500 text-sm">Aggregators</p>
                                    <p class="font-bold">7/8</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Performance</p>
                                    <p class="font-bold">4.2/5</p>
                                </div>
                                <div>
                                    <p class="text-5m text-gray-500">Transactions</p>
                                    <p class="font-bold">3,150</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Value</p>
                                    <p class="font-bold">TZS 525K</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-3">3</div>
                                <div>
                                    <p class="font-medium">District Coordinator</p>
                                    <p class="text-sm text-gray-500">AD-4003</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-gray-500 text-sm">Aggregators</p>
                                    <p class="font-bold">6/8</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Performance</p>
                                    <p class="font-bold">4.0/5</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Transactions</p>
                                    <p class="font-bold">2,980</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm">Value</p>
                                    <p class="font-bold">TZS 497K</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Performing Sales Team (Summary) -->
                <div class="bg-white p-6 rounded-xl shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-medal mr-2 text-yellow-500"></i> Top Performing Sales Team (This Month)
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="text-gray-500">Team Alpha</p>
                            <p class="text-2xl font-bold mt-1">2,100 Registrations</p>
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-green-500 text-sm">105% of Target</span>
                                <a href="#" onclick="showSection(event, 'sales-team-overview')" class="text-blue-600 hover:underline text-sm">View Details <i class="fas fa-arrow-right ml-1"></i></a>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="text-gray-500">Team Beta</p>
                            <p class="text-2xl font-bold mt-1">1,800 Registrations</p>
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-green-500 text-sm">90% of Target</span>
                                <a href="#" onclick="showSection(event, 'sales-team-overview')" class="text-blue-600 hover:underline text-sm">View Details <i class="fas fa-arrow-right ml-1"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Performing Freelancers (Summary) -->
                <div class="bg-white p-6 rounded-xl shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-star mr-2 text-yellow-500"></i> Top Performing Freelancers (This Month)
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="text-gray-500">Alex Johnson (FL-1001)</p>
                            <p class="text-2xl font-bold mt-1">128 Registrations</p>
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-green-500 text-sm">TZS 1,280 Commission</span>
                                <a href="#" onclick="showSection(event, 'freelancer-performance')" class="text-blue-600 hover:underline text-sm">View Details <i class="fas fa-arrow-right ml-1"></i></a>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="text-gray-500">Sarah Williams (FL-1002)</p>
                            <p class="text-2xl font-bold mt-1">115 Registrations</p>
                            <div class="flex justify-between items-center mt-2">
                                <span class="text-green-500 text-sm">TZS 1,142 Commission</span>
                                <a href="#" onclick="showSection(event, 'freelancer-performance')" class="text-blue-600 hover:underline text-sm">View Details <i class="fas fa-arrow-right ml-1"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Zone Activity -->
                <div class="bg-white p-6 rounded-xl shadow">
                    <h3 class="text-xl font-semibold mb-4">Recent Zone Activity</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Date</th>
                                    <th class="p-3 text-left">Activity Type</th>
                                    <th class="p-3 text-left">Description</th>
                                    <th class="p-3 text-left">Impact</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Today, 10:30 AM</td>
                                    <td class="p-3">Agent Recruitment</td>
                                    <td class="p-3">15 new agents onboarded in Eastern District</td>
                                    <td class="p-3">
                                        <span class="status-badge status-good">Positive</span>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Today, 9:15 AM</td>
                                    <td class="p-3">Float Distribution</td>
                                    <td class="p-3">TZS 42,000 distributed to Northern Region</td>
                                    <td class="p-3">
                                        <span class="status-badge status-good">Positive</span>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Yesterday, 4:45 PM</td>
                                    <td class="p-3">Fraud Alert</td>
                                    <td class="p-3">3 agents suspended in Western District</td>
                                    <td class="p-3">
                                        <span class="status-badge status-average">Monitoring</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Account Developers Section -->
            <div id="account-developers" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Account Developers</h2>
                    <div class="flex items-center space-x-4">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-user-plus mr-2"></i> Add Account Developer
                        </button>
                        <div class="relative">
                            <input type="text" placeholder="Search account developers..." class="pl-10 pr-4 py-2 rounded-lg border">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>
                </header>

                <div class="bg-white p-6 rounded-xl shadow">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-semibold">Account Developer Network</h3>
                            <p class="text-sm text-gray-500">Total: 4 account developers (4 active, 0 inactive)</p>
                        </div>
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>All Statuses</option>
                            <option>Active</option>
                            <option>Inactive</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Name</th>
                                    <th class="p-3 text-left">ID</th>
                                    <th class="p-3 text-left">Region</th>
                                    <th class="p-3 text-left">Aggregators</th>
                                    <th class="p-3 text-left">ASRs</th>
                                    <th class="p-3 text-left">Agents</th>
                                    <th class="p-3 text-left">Performance</th>
                                    <th class="p-3 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Regional Manager</td>
                                    <td class="p-3">AD-4001</td>
                                    <td class="p-3">Eastern Region</td>
                                    <td class="p-3">8</td>
                                    <td class="p-3">24</td>
                                    <td class="p-3">142</td>
                                    <td class="p-3">
                                        <span class="status-badge status-excellent">4.5/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Area Supervisor</td>
                                    <td class="p-3">AD-4002</td>
                                    <td class="p-3">Northern Region</td>
                                    <td class="p-3">7</td>
                                    <td class="p-3">18</td>
                                    <td class="p-3">128</td>
                                    <td class="p-3">
                                        <span class="status-badge status-good">4.2/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">District Coordinator</td>
                                    <td class="p-3">AD-4003</td>
                                    <td class="p-3">Western Region</td>
                                    <td class="p-3">6</td>
                                    <td class="p-3">15</td>
                                    <td class="p-3">98</td>
                                    <td class="p-3">
                                        <span class="status-badge status-average">4.0/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-4">
                        <span class="text-sm text-gray-500">Showing 1 to 3 of 4 account developers</span>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Previous</button>
                            <button class="px-3 py-1 bg-blue-600 text-white rounded-lg">1</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aggregators Section -->
            <div id="aggregators" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Aggregators</h2>
                    <div class="flex items-center space-x-4">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-user-plus mr-2"></i> Add Aggregator
                        </button>
                        <div class="relative">
                            <input type="text" placeholder="Search aggregators..." class="pl-10 pr-4 py-2 rounded-lg border">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>
                </header>

                <div class="bg-white p-6 rounded-xl shadow">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-semibold">Aggregator Network</h3>
                            <p class="text-sm text-gray-500">Total: 12 aggregators (10 active, 2 inactive)</p>
                        </div>
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>All Statuses</option>
                            <option>Active</option>
                            <option>Inactive</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Name</th>
                                    <th class="p-3 text-left">ID</th>
                                    <th class="p-3 text-left">Account Developer</th>
                                    <th class="p-3 text-left">Region</th>
                                    <th class="p-3 text-left">ASRs</th>
                                    <th class="p-3 text-left">Agents</th>
                                    <th class="p-3 text-left">Performance</th>
                                    <th class="p-3 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Global Aggregator</td>
                                    <td class="p-3">AGG-3001</td>
                                    <td class="p-3">Regional Manager (AD-4001)</td>
                                    <td class="p-3">Eastern Region</td>
                                    <td class="p-3">8</td>
                                    <td class="p-3">24</td>
                                    <td class="p-3">
                                        <span class="status-badge status-excellent">4.5/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">East Region Aggregator</td>
                                    <td class="p-3">AGG-3002</td>
                                    <td class="p-3">Area Supervisor (AD-4002)</td>
                                    <td class="p-3">Northern Region</td>
                                    <td class="p-3">7</td>
                                    <td class="p-3">18</td>
                                    <td class="p-3">
                                        <span class="status-badge status-good">4.2/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">North Region Aggregator</td>
                                    <td class="p-3">AGG-3003</td>
                                    <td class="p-3">District Coordinator (AD-4003)</td>
                                    <td class="p-3">Western Region</td>
                                    <td class="p-3">6</td>
                                    <td class="p-3">15</td>
                                    <td class="p-3">
                                        <span class="status-badge status-average">4.0/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-4">
                        <span class="text-sm text-gray-500">Showing 1 to 3 of 12 aggregators</span>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Previous</button>
                            <button class="px-3 py-1 bg-blue-600 text-white rounded-lg">1</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">3</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ASRs Section -->
            <div id="asrs" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Aggregator Sales Reps (ASRs)</h2>
                    <div class="flex items-center space-x-4">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-user-plus mr-2"></i> Add ASR
                        </button>
                        <div class="relative">
                            <input type="text" placeholder="Search ASRs..." class="pl-10 pr-4 py-2 rounded-lg border">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>
                </header>

                <div class="bg-white p-6 rounded-xl shadow">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-semibold">ASR Network</h3>
                            <p class="text-sm text-gray-500">Total: 48 ASRs (42 active, 6 inactive)</p>
                        </div>
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>All Statuses</option>
                            <option>Active</option>
                            <option>Inactive</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Name</th>
                                    <th class="p-3 text-left">ID</th>
                                    <th class="p-3 text-left">Aggregator</th>
                                    <th class="p-3 text-left">Account Developer</th>
                                    <th class="p-3 text-left">Agents</th>
                                    <th class="p-3 text-left">Performance</th>
                                    <th class="p-3 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">John Smith</td>
                                    <td class="p-3">ASR-1001</td>
                                    <td class="p-3">Global Aggregator (AGG-3001)</td>
                                    <td class="p-3">Regional Manager (AD-4001)</td>
                                    <td class="p-3">6</td>
                                    <td class="p-3">
                                        <span class="status-badge status-excellent">4.5/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Sarah Johnson</td>
                                    <td class="p-3">ASR-1002</td>
                                    <td class="p-3">Global Aggregator (AGG-3001)</td>
                                    <td class="p-3">Regional Manager (AD-4001)</td>
                                    <td class="p-3">5</td>
                                    <td class="p-3">
                                        <span class="status-badge status-good">4.2/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Michael Brown</td>
                                    <td class="p-3">ASR-1003</td>
                                    <td class="p-3">East Region Aggregator (AGG-3002)</td>
                                    <td class="p-3">Area Supervisor (AD-4002)</td>
                                    <td class="p-3">4</td>
                                    <td class="p-3">
                                        <span class="status-badge status-average">4.0/5</span>
                                    </td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-4">
                        <span class="text-sm text-gray-500">Showing 1 to 3 of 48 ASRs</span>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Previous</button>
                            <button class="px-3 py-1 bg-blue-600 text-white rounded-lg">1</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">3</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agents Section -->
            <div id="agents" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Agents</h2>
                    <div class="flex items-center space-x-4">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-user-plus mr-2"></i> Add Agent
                        </button>
                        <div class="relative">
                            <input type="text" placeholder="Search agents..." class="pl-10 pr-4 py-2 rounded-lg border">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>
                </header>

                <div class="bg-white p-6 rounded-xl shadow">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-semibold">Agent Network</h3>
                            <p class="text-sm text-gray-500">Total: 428 agents (342 active, 86 inactive)</p>
                        </div>
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>All Statuses</option>
                            <option>Active</option>
                            <option>Inactive</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Name</th>
                                    <th class="p-3 text-left">ID</th>
                                    <th class="p-3 text-left">ASR</th>
                                    <th class="p-3 text-left">Aggregator</th>
                                    <th class="p-3 text-left">Account Developer</th>
                                    <th class="p-3 text-left">Status</th>
                                    <th class="p-3 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">David Wilson</td>
                                    <td class="p-3">AG-2001</td>
                                    <td class="p-3">John Smith (ASR-1001)</td>
                                    <td class="p-3">Global Aggregator (AGG-3001)</td>
                                    <td class="p-3">Regional Manager (AD-4001)</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Emily Davis</td>
                                    <td class="p-3">AG-2002</td>
                                    <td class="p-3">John Smith (ASR-1001)</td>
                                    <td class="p-3">Global Aggregator (AGG-3001)</td>
                                    <td class="p-3">Regional Manager (AD-4001)</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Robert Johnson</td>
                                    <td class="p-3">AG-2003</td>
                                    <td class="p-3">Sarah Johnson (ASR-1002)</td>
                                    <td class="p-3">East Region Aggregator (AGG-3002)</td>
                                    <td class="p-3">Area Supervisor (AD-4002)</td>
                                    <td class="p-3"><span class="status-badge status-inactive">Inactive</span></td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-4">
                        <span class="text-sm text-gray-500">Showing 1 to 3 of 428 agents</span>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Previous</button>
                            <button class="px-3 py-1 bg-blue-600 text-white rounded-lg">1</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">3</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Merchants Section -->
            <div id="merchants" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Merchants</h2>
                    <div class="flex items-center space-x-4">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-store-alt mr-2"></i> Add Merchant
                        </button>
                        <div class="relative">
                            <input type="text" placeholder="Search merchants..." class="pl-10 pr-4 py-2 rounded-lg border">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>
                </header>

                <div class="bg-white p-6 rounded-xl shadow">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-xl font-semibold">Merchant Network</h3>
                            <p class="text-sm text-gray-500">Total: 156 merchants (124 active, 32 inactive)</p>
                        </div>
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>All Statuses</option>
                            <option>Active</option>
                            <option>Inactive</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Name</th>
                                    <th class="p-3 text-left">ID</th>
                                    <th class="p-3 text-left">Category</th>
                                    <th class="p-3 text-left">Agents</th>
                                    <th class="p-3 text-left">Last Settlement</th>
                                    <th class="p-3 text-left">Status</th>
                                    <th class="p-3 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">QuickPay Store</td>
                                    <td class="p-3">MCH-5001</td>
                                    <td class="p-3">Retail</td>
                                    <td class="p-3">12</td>
                                    <td class="p-3">Today, TZS 1,250</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">City Market</td>
                                    <td class="p-3">MCH-5002</td>
                                    <td class="p-3">Supermarket</td>
                                    <td class="p-3">8</td>
                                    <td class="p-3">Today, TZS 980</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Mobile Zone</td>
                                    <td class="p-3">MCH-5003</td>
                                    <td class="p-3">Telecom</td>
                                    <td class="p-3">5</td>
                                    <td class="p-3">2 weeks ago</td>
                                    <td class="p-3"><span class="status-badge status-inactive">Inactive</span></td>
                                    <td class="p-3">
                                        <button class="text-blue-600 hover:text-blue-800 mr-2">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-4">
                        <span class="text-sm text-gray-500">Showing 1 to 3 of 156 merchants</span>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Previous</button>
                            <button class="px-3 py-1 bg-blue-600 text-white rounded-lg">1</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">3</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sales Team Overview Section -->
            <div id="sales-team-overview" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Sales Team Overview</h2>
                    <div class="flex items-center space-x-4">
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>This Month</option>
                            <option>Last Month</option>
                            <option>This Quarter</option>
                        </select>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-download mr-2"></i> Export Report
                        </button>
                    </div>
                </header>

                <!-- Sales Team KPIs -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Total Registrations</p>
                        <p class="text-2xl font-bold mt-1">7,540</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 15%</span>
                            <span class="text-sm text-gray-500">vs last month</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Active Subscriptions</p>
                        <p class="text-2xl font-bold mt-1">6,800</p>
                        <p class="text-sm text-gray-500 mt-2">90% active rate</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Avg. Reg per Rep</p>
                        <p class="text-2xl font-bold mt-1">45</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 8%</span>
                            <span class="text-sm text-gray-500">vs target</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Conversion Rate</p>
                        <p class="text-2xl font-bold mt-1">28.5%</p>
                        <p class="text-sm text-gray-500 mt-2">From leads to active subs</p>
                    </div>
                </div>

                <!-- Sales Team Performance Chart -->
                <div class="bg-white p-6 rounded-xl shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4">Sales Team Performance (Registrations)</h3>
                    <div class="chart-container">
                        <canvas id="salesTeamRegistrationsChart"></canvas>
                    </div>
                </div>

                <!-- Sales Team Details Table -->
                <div class="bg-white p-6 rounded-xl shadow">
                    <h3 class="text-xl font-semibold mb-4">Sales Team Details</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Team Name</th>
                                    <th class="p-3 text-left">Manager</th>
                                    <th class="p-3 text-left">Total Registrations</th>
                                    <th class="p-3 text-left">Active Subscriptions</th>
                                    <th class="p-3 text-left">Conversion Rate</th>
                                    <th class="p-3 text-left">Target Achieved</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Alpha Team</td>
                                    <td class="p-3">John Doe</td>
                                    <td class="p-3">2,100</td>
                                    <td class="p-3">1,900</td>
                                    <td class="p-3">30%</td>
                                    <td class="p-3"><span class="status-badge status-active">105%</span></td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Beta Team</td>
                                    <td class="p-3">Jane Smith</td>
                                    <td class="p-3">1,800</td>
                                    <td class="p-3">1,620</td>
                                    <td class="p-3">28%</td>
                                    <td class="p-3"><span class="status-badge status-good">90%</span></td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Gamma Team</td>
                                    <td class="p-3">Peter Jones</td>
                                    <td class="p-3">1,500</td>
                                    <td class="p-3">1,350</td>
                                    <td class="p-3">25%</td>
                                    <td class="p-3"><span class="status-badge status-average">85%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Freelancer Performance Section -->
            <div id="freelancer-performance" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Freelancer Performance</h2>
                    <div class="flex items-center space-x-4">
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>This Month</option>
                            <option>Last Month</option>
                            <option>This Quarter</option>
                        </select>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-download mr-2"></i> Export Report
                        </button>
                    </div>
                </header>

                <!-- Freelancer KPIs -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Total Freelancers</p>
                        <p class="text-2xl font-bold mt-1">187</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 5%</span>
                            <span class="text-sm text-gray-500">new this month</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Active Freelancers</p>
                        <p class="text-2xl font-bold mt-1">142</p>
                        <p class="text-sm text-gray-500 mt-2">76% active rate</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Avg. Registrations</p>
                        <p class="text-2xl font-bold mt-1">28</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 10%</span>
                            <span class="text-sm text-gray-500">vs last month</span>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow">
                        <p class="text-gray-500">Total Commissions</p>
                        <p class="text-2xl font-bold mt-1">TZS 15,200</p>
                        <p class="text-sm text-gray-500 mt-2">This month</p>
                    </div>
                </div>

                <!-- Freelancer Registration Trend Chart -->
                <div class="bg-white p-6 rounded-xl shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4">Freelancer Registration Trend</h3>
                    <div class="chart-container">
                        <canvas id="freelancerRegistrationTrendChart"></canvas>
                    </div>
                </div>

                <!-- Top Performing Freelancers Table -->
                <div class="bg-white p-6 rounded-xl shadow">
                    <h3 class="text-xl font-semibold mb-4">Top Performing Freelancers (Registrations)</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Freelancer Name</th>
                                    <th class="p-3 text-left">Freelancer ID</th>
                                    <th class="p-3 text-left">Total Registrations</th>
                                    <th class="p-3 text-left">Active Subscriptions</th>
                                    <th class="p-3 text-left">Commission Earned</th>
                                    <th class="p-3 text-left">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Alex Johnson</td>
                                    <td class="p-3">FL-1001</td>
                                    <td class="p-3">128</td>
                                    <td class="p-3">115</td>
                                    <td class="p-3">TZS 1,280</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Sarah Williams</td>
                                    <td class="p-3">FL-1002</td>
                                    <td class="p-3">115</td>
                                    <td class="p-3">105</td>
                                    <td class="p-3">TZS 1,142</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Michael Brown</td>
                                    <td class="p-3">FL-1003</td>
                                    <td class="p-3">98</td>
                                    <td class="p-3">82</td>
                                    <td class="p-3">TZS 980</td>
                                    <td class="p-3"><span class="status-badge status-inactive">Inactive</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Customer Base Section (Zonal Manager View) -->
            <div id="customer-base-zonal" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Zone Customer Base</h2>
                    <div class="flex items-center space-x-4">
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>All Regions</option>
                            <option>Eastern Region</option>
                            <option>Northern Region</option>
                            <option>Western Region</option>
                        </select>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-download mr-2"></i> Export Customer Data
                        </button>
                    </div>
                </header>

                <div class="bg-white p-6 rounded-xl shadow">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">Customer Database Overview</h3>
                        <select class="bg-gray-100 p-2 rounded-lg border">
                            <option>All Statuses</option>
                            <option>Active</option>
                            <option>Inactive</option>
                            <option>Suspended</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table id="customerTableZonal" class="w-full">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Customer Name</th>
                                    <th class="p-3 text-left">Customer ID</th>
                                    <th class="p-3 text-left">Plan</th>
                                    <th class="p-3 text-left">Region</th>
                                    <th class="p-3 text-left">Status</th>
                                    <th class="p-3 text-left">ARPU (TZS)</th>
                                    <th class="p-3 text-left">Registered By</th>
                                    <th class="p-3 text-left">Registration Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">John Smith</td>
                                    <td class="p-3">CUST-5001</td>
                                    <td class="p-3">5G Unlimited</td>
                                    <td class="p-3">Eastern</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">TZS 12,500</td>
                                    <td class="p-3">Alex Johnson (FL-1001)</td>
                                    <td class="p-3">2023-05-15</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Sarah Johnson</td>
                                    <td class="p-3">CUST-5002</td>
                                    <td class="p-3">Fiber 1Gbps</td>
                                    <td class="p-3">Northern</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">TZS 15,200</td>
                                    <td class="p-3">Sarah Williams (FL-1002)</td>
                                    <td class="p-3">2023-06-22</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Michael Brown</td>
                                    <td class="p-3">CUST-5003</td>
                                    <td class="p-3">Business Plan</td>
                                    <td class="p-3">Western</td>
                                    <td class="p-3"><span class="status-badge status-inactive">Inactive</span></td>
                                    <td class="p-3">TZS 45,800</td>
                                    <td class="p-3">Michael Brown (FL-1003)</td>
                                    <td class="p-3">2023-04-10</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Emily Davis</td>
                                    <td class="p-3">CUST-5004</td>
                                    <td class="p-3">5G Unlimited</td>
                                    <td class="p-3">Eastern</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">TZS 12,500</td>
                                    <td class="p-3">Alex Johnson (FL-1001)</td>
                                    <td class="p-3">2023-07-05</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Robert Wilson</td>
                                    <td class="p-3">CUST-5005</td>
                                    <td class="p-3">Fiber 1Gbps</td>
                                    <td class="p-3">Northern</td>
                                    <td class="p-3"><span class="status-badge status-active">Active</span></td>
                                    <td class="p-3">TZS 15,200</td>
                                    <td class="p-3">Sarah Williams (FL-1002)</td>
                                    <td class="p-3">2023-07-12</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-4">
                        <span class="text-sm text-gray-500">Showing 1 to 5 of 1,280 customers in zone</span>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Previous</button>
                            <button class="px-3 py-1 bg-blue-600 text-white rounded-lg">1</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">2</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">3</button>
                            <button class="px-3 py-1 border rounded-lg hover:bg-gray-100">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Section -->
            <div id="performance" class="content-section">
                <header class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">Performance Metrics</h2>
                    <div class="flex items-center space-x-4">
                        <select class="bg-gray-100 p-2 rounded-lg border" id="month-select">
                            <option value="0">This Month</option>
                            <option value="-1">Last Month</option>
                            <option value="-2">2 Months Ago</option>
                            <option value="-3">3 Months Ago</option>
                        </select>
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-download mr-2"></i> Export
                        </button>
                    </div>
                </header>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-6 rounded-xl shadow">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">Current Month</h3>
                            <span class="text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full">Estimated</span>
                        </div>
                        <p class="text-3xl font-bold">TZS 42,280</p>
                        <div class="flex items-center mt-2">
                            <span class="text-green-500 mr-1"><i class="fas fa-arrow-up"></i> 15%</span>
                            <span class="text-sm text-gray-500">from last month</span>
                        </div>
                        <div class="mt-4">
                            <div class="flex justify-between mb-1">
                                <span class="text-gray-500">Target</span>
                                <span>TZS 45,000</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill bg-blue-600" style="width: 94%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow">
                        <h3 class="text-lg font-semibold mb-4">Last Month</h3>
                        <p class="text-3xl font-bold">TZS 36,692</p>
                        <p class="text-sm text-gray-500 mt-2">Paid on 5th July</p>
                        <div class="mt-4">
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-500">Base Commissions</span>
                                <span>TZS 30,842</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-500">Performance Bonus</span>
                                <span>TZS 5,850</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow">
                        <h3 class="text-lg font-semibold mb-4">Agent Activity</h3>
                        <p class="text-3xl font-bold">428</p>
                        <p class="text-sm text-gray-500 mt-2">Active agents this month</p>
                        <div class="mt-4">
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-500">Cash In</span>
                                <span>4,414 transactions</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-500">Cash Out</span>
                                <span>8,428 transactions</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow">
                    <h3 class="text-xl font-semibold mb-4">Zone Performance by Region</h3>
                    <div class="chart-container mb-6">
                        <canvas id="zonePerformanceReportChart"></canvas>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="p-3 text-left">Metric</th>
                                    <th class="p-3 text-left">Eastern Region</th>
                                    <th class="p-3 text-left">Northern Region</th>
                                    <th class="p-3 text-left">Western Region</th>
                                    <th class="p-3 text-left">Zone Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">Transaction Volume</td>
                                    <td class="p-3">3,842</td>
                                    <td class="p-3">3,150</td>
                                    <td class="p-3">2,980</td>
                                    <td class="p-3">9,972</td>
                                    </tr>
                                    <tr class="border-b hover:bg-gray-50">
                                        <td class="p-3">Transaction Value</td>
                                        <td class="p-3">TZS 642K</td>
                                        <td class="p-3">TZS 525K</td>
                                        <td class="p-3">TZS 497K</td>
                                        <td class="p-3">TZS 1.66M</td>
                                    </tr>
                                    <tr class="border-b hover:bg-gray-50">
                                        <td class="p-3">Active Agents</td>
                                        <td class="p-3">142</td>
                                        <td class="p-3">128</td>
                                        <td class="p-3">98</td>
                                        <td class="p-3">368</td>
                                    </tr>
                                    <tr class="border-b hover:bg-gray-50">
                                        <td class="p-3">Agent Growth</td>
                                        <td class="p-3">+12%</td>
                                        <td class="p-3">+8%</td>
                                        <td class="p-3">+5%</td>
                                        <td class="p-3">+8.3%</td>
                                    </tr>
                                    <tr class="border-b hover:bg-gray-50">
                                        <td class="p-3">Performance Rating</td>
                                        <td class="p-3">
                                            <span class="status-badge status-excellent">4.5/5</span>
                                        </td>
                                        <td class="p-3">
                                            <span class="status-badge status-good">4.2/5</span>
                                        </td>
                                        <td class="p-3">
                                            <span class="status-badge status-average">4.0/5</span>
                                        </td>
                                        <td class="p-3">
                                            <span class="status-badge status-good">4.23/5</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reports Section -->
                <div id="reports" class="content-section">
                    <header class="flex justify-between items-center mb-8">
                        <h2 class="text-2xl font-bold text-gray-800">Reports</h2>
                        <div class="flex items-center space-x-4">
                            <div class="flex bg-gray-100 rounded-lg p-1">
                                <button class="px-3 py-1 rounded-lg tab-button active" onclick="changeReportTab(event, 'zone-performance-report')">Zone Performance</button>
                                <button class="px-3 py-1 rounded-lg tab-button" onclick="changeReportTab(event, 'fraud-analysis')">Fraud Analysis</button>
                                <button class="px-3 py-1 rounded-lg tab-button" onclick="changeReportTab(event, 'agent-growth')">Agent Growth</button>
                            </div>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                <i class="fas fa-download mr-2"></i> Export
                            </button>
                        </div>
                    </header>

                    <!-- Date Filters -->
                    <div class="bg-white p-4 rounded-xl shadow mb-6">
                        <div class="flex flex-wrap items-center gap-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-500">Date Range:</span>
                                <div class="flex bg-gray-100 rounded-lg p-1">
                                    <button class="px-3 py-1 rounded-lg tab-button active">This Month</button>
                                    <button class="px-3 py-1 rounded-lg tab-button">Last Month</button>
                                    <button class="px-3 py-1 rounded-lg tab-button">Quarterly</button>
                                    <button class="px-3 py-1 rounded-lg tab-button">Yearly</button>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-500">Custom Range:</span>
                                <input type="date" class="p-2 border rounded-lg">
                                <span>to</span>
                                <input type="date" class="p-2 border rounded-lg">
                                <button class="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700">Apply</button>
                            </div>
                        </div>
                    </div>

                    <!-- Report Tabs Content -->
                    <div id="zone-performance-report" class="report-tab active">
                        <div class="bg-white p-6 rounded-xl shadow">
                            <h3 class="text-xl font-semibold mb-4">Zone Performance Report</h3>
                            <div class="chart-container mb-6">
                                <canvas id="zonePerformanceReportChart"></canvas>
                            </div>

                            <div class="overflow-x-auto">
                                <table class="w-full border-collapse">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="p-3 text-left">Metric</th>
                                            <th class="p-3 text-left">Eastern Region</th>
                                            <th class="p-3 text-left">Northern Region</th>
                                            <th class="p-3 text-left">Western Region</th>
                                            <th class="p-3 text-left">Zone Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Transaction Volume</td>
                                            <td class="p-3">3,842</td>
                                            <td class="p-3">3,150</td>
                                            <td class="p-3">2,980</td>
                                            <td class="p-3">9,972</td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Transaction Value</td>
                                            <td class="p-3">TZS 642K</td>
                                            <td class="p-3">TZS 525K</td>
                                            <td class="p-3">TZS 497K</td>
                                            <td class="p-3">TZS 1.66M</td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Active Agents</td>
                                            <td class="p-3">142</td>
                                            <td class="p-3">128</td>
                                            <td class="p-3">98</td>
                                            <td class="p-3">368</td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Agent Growth</td>
                                            <td class="p-3">+12%</td>
                                            <td class="p-3">+8%</td>
                                            <td class="p-3">+5%</td>
                                            <td class="p-3">+8.3%</td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Performance Rating</td>
                                            <td class="p-3">
                                                <span class="status-badge status-excellent">4.5/5</span>
                                            </td>
                                            <td class="p-3">
                                                <span class="status-badge status-good">4.2/5</span>
                                            </td>
                                            <td class="p-3">
                                                <span class="status-badge status-average">4.0/5</span>
                                            </td>
                                            <td class="p-3">
                                                <span class="status-badge status-good">4.23/5</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Fraud Analysis Tab -->
                    <div id="fraud-analysis" class="report-tab">
                        <div class="bg-white p-6 rounded-xl shadow">
                            <h3 class="text-xl font-semibold mb-4">Fraud Analysis Report</h3>
                            <div class="chart-container mb-6">
                                <canvas id="fraudAnalysisChart"></canvas>
                            </div>

                            <div class="overflow-x-auto">
                                <table class="w-full border-collapse">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="p-3 text-left">Region</th>
                                            <th class="p-3 text-left">Confirmed Fraud</th>
                                            <th class="p-3 text-left">Suspected Fraud</th>
                                            <th class="p-3 text-left">Total Cases</th>
                                            <th class="p-3 text-left">Value Impact</th>
                                            <th class="p-3 text-left">Trend</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Eastern Region</td>
                                            <td class="p-3">8</td>
                                            <td class="p-3">12</td>
                                            <td class="p-3">20</td>
                                            <td class="p-3">TZS 2,450</td>
                                            <td class="p-3">
                                                <span class="text-green-500"><i class="fas fa-arrow-down"></i> 12%</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Northern Region</td>
                                            <td class="p-3">12</td>
                                            <td class="p-3">15</td>
                                            <td class="p-3">27</td>
                                            <td class="p-3">TZS 3,780</td>
                                            <td class="p-3">
                                                <span class="text-red-500"><i class="fas fa-arrow-up"></i> 8%</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Western Region</td>
                                            <td class="p-3">15</td>
                                            <td class="p-3">18</td>
                                            <td class="p-3">33</td>
                                            <td class="p-3">TZS 4,250</td>
                                            <td class="p-3">
                                                <span class="text-red-500"><i class="fas fa-arrow-up"></i> 15%</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Agent Growth Tab -->
                    <div id="agent-growth" class="report-tab">
                        <div class="bg-white p-6 rounded-xl shadow">
                            <h3 class="text-xl font-semibold mb-4">Agent Growth Report</h3>
                            <div class="chart-container mb-6">
                                <canvas id="agentGrowthChart"></canvas>
                            </div>

                            <div class="overflow-x-auto">
                                <table class="w-full border-collapse">
                                    <thead>
                                        <tr class="bg-gray-100">
                                            <th class="p-3 text-left">Region</th>
                                            <th class="p-3 text-left">Current Agents</th>
                                            <th class="p-3 text-left">New Agents (30d)</th>
                                            <th class="p-3 text-left">Growth Rate</th>
                                            <th class="p-3 text-left">Target</th>
                                            <th class="p-3 text-left">Progress</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Eastern Region</td>
                                            <td class="p-3">142</td>
                                            <td class="p-3">18</td>
                                            <td class="p-3">+12%</td>
                                            <td class="p-3">150</td>
                                            <td class="p-3">
                                                <div class="progress-bar">
                                                    <div class="progress-fill bg-blue-600" style="width: 95%"></div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Northern Region</td>
                                            <td class="p-3">128</td>
                                            <td class="p-3">12</td>
                                            <td class="p-3">+8%</td>
                                            <td class="p-3">140</td>
                                            <td class="p-3">
                                                <div class="progress-bar">
                                                    <div class="progress-fill bg-blue-600" style="width: 91%"></div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="p-3">Western Region</td>
                                            <td class="p-3">98</td>
                                            <td class="p-3">8</td>
                                            <td class="p-3">+5%</td>
                                            <td class="p-3">110</td>
                                            <td class="p-3">
                                                <div class="progress-bar">
                                                    <div class="progress-fill bg-blue-600" style="width: 89%"></div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Modal Structure (for alerts) -->
    <div id="customModal" class="fixed inset-0 bg-gray-600 bg-opacity50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900" id="modalTitle"></h3>
                <div class="mt-2 px-7 py-3">
                    <p class="text-sm text-gray-500" id="modalMessage"></p>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="modalCloseButton" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300">
                        OK
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Global Chart instances to prevent re-initialization issues
        let zonePerformanceChartInstance = null;
        let zonePerformanceReportChartInstance = null;
        let fraudAnalysisChartInstance = null;
        let agentGrowthChartInstance = null;
        let salesTeamRegistrationsChartInstance = null; // New chart instance for sales team
        let freelancerRegistrationTrendChartInstance = null; // New chart instance for freelancer
        let customerTableZonalInstance = null; // New DataTable instance for zonal customer base

        /**
         * Displays a custom modal instead of a native alert.
         * @param {string} title - The title of the modal.
         * @param {string} message - The message content of the modal.
         */
        function showCustomModal(title, message) {
            const modal = document.getElementById('customModal');
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            modal.classList.remove('hidden');

            // Close modal when OK button is clicked
            document.getElementById('modalCloseButton').onclick = function() {
                modal.classList.add('hidden');
            };

            // Close modal when clicking outside (optional)
            modal.onclick = function(event) {
                if (event.target === modal) {
                    modal.classList.add('hidden');
                }
            };
        }

        /**
         * Handles navigation by showing the selected section and updating active nav item.
         * @param {Event | null} event - The click event object, or null if called programmatically.
         * @param {string} sectionId - The ID of the section to show.
         */
        function showSection(event, sectionId) {
            // Prevent default anchor behavior if event is provided
            if (event) {
                event.preventDefault();
            }

            // Hide all content sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show the selected section
            document.getElementById(sectionId).classList.add('active');

            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            // Determine the element to apply the 'active' class to
            let targetNavItem = null;
            if (event && event.currentTarget) {
                // If clicked directly, use event.currentTarget
                targetNavItem = event.currentTarget;
            } else {
                // If called programmatically, find the corresponding nav item by sectionId
                targetNavItem = document.querySelector(`.nav-item[onclick*="${sectionId}"]`);
            }

            if (targetNavItem) {
                targetNavItem.classList.add('active');
            }

            // Initialize charts/tables specific to the section when it becomes active
            // Destroy existing chart instances before re-initializing to prevent duplicates
            if (zonePerformanceChartInstance) { zonePerformanceChartInstance.destroy(); zonePerformanceChartInstance = null; }
            if (zonePerformanceReportChartInstance) { zonePerformanceReportChartInstance.destroy(); zonePerformanceReportChartInstance = null; }
            if (fraudAnalysisChartInstance) { fraudAnalysisChartInstance.destroy(); fraudAnalysisChartInstance = null; }
            if (agentGrowthChartInstance) { agentGrowthChartInstance.destroy(); agentGrowthChartInstance = null; }
            if (salesTeamRegistrationsChartInstance) { salesTeamRegistrationsChartInstance.destroy(); salesTeamRegistrationsChartInstance = null; }
            if (freelancerRegistrationTrendChartInstance) { freelancerRegistrationTrendChartInstance.destroy(); freelancerRegistrationTrendChartInstance = null; }
            
            // Destroy DataTable instances if they exist
            if ($.fn.DataTable.isDataTable('#customerTableZonal')) {
                $('#customerTableZonal').DataTable().destroy();
                customerTableZonalInstance = null; // Reset the instance variable
            }


            if (sectionId === 'dashboard') {
                initZonePerformanceChart();
            } else if (sectionId === 'performance') {
                initZonePerformanceReportChart(); // This chart is also used in reports, so it's here too
            } else if (sectionId === 'reports') {
                // When reports section is shown, initialize the default active tab's chart
                const activeReportTab = document.querySelector('.report-tab.active');
                if (activeReportTab) {
                    initReportCharts(activeReportTab.id);
                } else {
                    // If no active tab, default to the first one
                    changeReportTab(null, 'zone-performance-report');
                }
            } else if (sectionId === 'sales-team-overview') {
                initSalesTeamRegistrationsChart();
            } else if (sectionId === 'freelancer-performance') {
                initFreelancerRegistrationTrendChart();
            } else if (sectionId === 'customer-base-zonal') {
                initCustomerBaseTableZonal();
            }
        }

        /**
         * Handles switching between report tabs and initializes the corresponding chart.
         * @param {Event | null} event - The click event.
         * @param {string} tabId - The ID of the report tab to show.
         */
        function changeReportTab(event, tabId) {
            // Prevent default anchor behavior if applicable
            if (event) {
                event.preventDefault();
            }

            // Hide all report tabs
            document.querySelectorAll('.report-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            // Show selected report tab
            document.getElementById(tabId).classList.add('active');

            // Update active tab button
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('active');
            } else {
                // If event is null (e.g., initial load), find the button by tabId and activate it
                const defaultButton = document.querySelector(`.tab-button[onclick*="${tabId}"]`);
                if (defaultButton) {
                    defaultButton.classList.add('active');
                }
            }

            // Initialize the chart for the newly active tab
            initReportCharts(tabId);
        }

        /**
         * Initializes the Zone Performance Chart on the Dashboard.
         */
        function initZonePerformanceChart() {
            // Destroy existing chart instance if it exists
            if (zonePerformanceChartInstance) {
                zonePerformanceChartInstance.destroy();
            }

            const ctx = document.getElementById('zonePerformanceChart').getContext('2d');
            zonePerformanceChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                    datasets: [{
                        label: 'Transaction Value',
                        data: [1200000, 1350000, 1420000, 1580000, 1720000, 1850000, 2140000],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.3,
                        fill: true,
                        yAxisID: 'y-value' // Unique ID for value axis
                    }, {
                        label: 'Active Agents',
                        data: [320, 350, 368, 382, 395, 408, 428],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.3,
                        fill: false,
                        yAxisID: 'y-agents' // Unique ID for agents axis
                    },
                    {
                        label: 'Registrations', // New dataset for registrations
                        data: [5000, 5500, 6000, 6500, 7000, 7500, 7540], // Sample data for registrations
                        borderColor: '#8b5cf6', // Purple color for registrations
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.3,
                        fill: false,
                        yAxisID: 'y-registrations' // Unique ID for registrations axis
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.dataset.yAxisID === 'y-value') {
                                        return label + 'TZS ' + context.raw.toLocaleString(); // Changed to TZS
                                    }
                                    return label + context.raw.toLocaleString();
                                }
                            }
                        }
                    },
                    scales: {
                        'y-value': { // Left axis for Transaction Value
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Transaction Value (TZS)' // Changed to TZS
                            },
                            ticks: {
                                callback: function(value) {
                                    return 'TZS ' + (value / 1000) + 'K'; // Changed to TZS
                                }
                            }
                        },
                        'y-agents': { // Right axis for Active Agents
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Active Agents'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        },
                        'y-registrations': { // New right axis for Registrations
                            type: 'linear',
                            display: true,
                            position: 'right', // Position on the right side
                            title: {
                                display: true,
                                text: 'Registrations'
                            },
                            grid: {
                                drawOnChartArea: false // Do not draw grid lines for this axis
                            },
                            offset: true // This can help with overlap
                        }
                    }
                }
            });
        }

        /**
         * Initializes the Zone Performance Report Chart.
         */
        function initZonePerformanceReportChart() {
            // Destroy existing chart instance if it exists
            if (zonePerformanceReportChartInstance) {
                zonePerformanceReportChartInstance.destroy();
            }

            const ctx = document.getElementById('zonePerformanceReportChart').getContext('2d');
            zonePerformanceReportChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Eastern Region', 'Northern Region', 'Western Region'],
                    datasets: [{
                        label: 'Cash In',
                        data: [420000, 350000, 310000],
                        backgroundColor: '#10b981'
                    }, {
                        label: 'Cash Out',
                        data: [580000, 450000, 380000],
                        backgroundColor: '#3b82f6'
                    },
                    {
                        label: 'Registrations', // Add registrations to this chart as well
                        data: [2500, 2000, 1500], // Sample registration data per region
                        backgroundColor: '#8b5cf6' // Purple color
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': TZS ' + context.raw.toLocaleString(); // Changed to TZS
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'TZS ' + (value / 1000) + 'K'; // Changed to TZS
                                }
                            }
                        }
                    }
                }
            });
        }

        /**
         * Initializes charts specific to the Reports section based on the active tab.
         * @param {string} activeTabId - The ID of the currently active report tab.
         */
        function initReportCharts(activeTabId) {
            // Destroy all report chart instances to ensure only the active one is drawn
            if (zonePerformanceReportChartInstance) {
                zonePerformanceReportChartInstance.destroy();
                zonePerformanceReportChartInstance = null;
            }
            if (fraudAnalysisChartInstance) {
                fraudAnalysisChartInstance.destroy();
                fraudAnalysisChartInstance = null;
            }
            if (agentGrowthChartInstance) {
                agentGrowthChartInstance.destroy();
                agentGrowthChartInstance = null;
            }
            

            if (activeTabId === 'zone-performance-report') {
                initZonePerformanceReportChart();
            } else if (activeTabId === 'fraud-analysis') {
                const fraudCtx = document.getElementById('fraudAnalysisChart').getContext('2d');
                fraudAnalysisChartInstance = new Chart(fraudCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Eastern Region', 'Northern Region', 'Western Region'],
                        datasets: [{
                            label: 'Confirmed Fraud',
                            data: [8, 12, 15],
                            backgroundColor: '#ef4444'
                        }, {
                            label: 'Suspected Fraud',
                            data: [12, 15, 18],
                            backgroundColor: '#f59e0b'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        }
                    }
                });
            } else if (activeTabId === 'agent-growth') {
                const growthCtx = document.getElementById('agentGrowthChart').getContext('2d');
                agentGrowthChartInstance = new Chart(growthCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                        datasets: [{
                            label: 'Eastern Region',
                            data: [120, 125, 130, 132, 135, 138, 142],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.3,
                            fill: true
                        }, {
                            label: 'Northern Region',
                            data: [100, 105, 110, 115, 120, 125, 128],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.3,
                            fill: true
                        }, {
                            label: 'Western Region',
                            data: [80, 82, 85, 88, 92, 95, 98],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        }
                    }
                });
            }
        }

        /**
         * Initializes the Sales Team Registrations Chart.
         */
        function initSalesTeamRegistrationsChart() {
            if (salesTeamRegistrationsChartInstance) {
                salesTeamRegistrationsChartInstance.destroy();
            }
            const ctx = document.getElementById('salesTeamRegistrationsChart').getContext('2d');
            salesTeamRegistrationsChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Alpha Team', 'Beta Team', 'Gamma Team'],
                    datasets: [{
                        label: 'Total Registrations',
                        data: [2100, 1800, 1500],
                        backgroundColor: '#3b82f6'
                    }, {
                        label: 'Active Subscriptions',
                        data: [1900, 1620, 1350],
                        backgroundColor: '#10b981'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Sales Team Registrations Overview'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Registrations'
                            }
                        }
                    }
                }
            });
        }

        /**
         * Initializes the Freelancer Registration Trend Chart.
         */
        function initFreelancerRegistrationTrendChart() {
            if (freelancerRegistrationTrendChartInstance) {
                freelancerRegistrationTrendChartInstance.destroy();
            }
            const ctx = document.getElementById('freelancerRegistrationTrendChart').getContext('2d');
            freelancerRegistrationTrendChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                    datasets: [{
                        label: 'New Freelancer Registrations',
                        data: [10, 12, 15, 18, 20, 22, 25],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: 'Total Active Freelancers',
                        data: [100, 105, 110, 115, 120, 130, 142],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Freelancer Registration Trend'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Freelancers'
                            }
                        }
                    }
                }
            });
        }

        /**
         * Initializes the Zonal Customer Base Table using DataTables.
         */
        function initCustomerBaseTableZonal() {
            // Destroy existing DataTable instance if it exists
            if ($.fn.DataTable.isDataTable('#customerTableZonal')) {
                $('#customerTableZonal').DataTable().destroy();
            }
            customerTableZonalInstance = $('#customerTableZonal').DataTable({
                dom: 'Bfrtip',
                buttons: ['copy', 'csv', 'excel'],
                responsive: true,
                // Add any specific options for this table, e.g., ordering, searching
            });
        }

        /**
         * Handles the logout process.
         * Redirects to the index.html (login page).
         */
        function logout() {
            showCustomModal('Logout', 'Logging out... Redirecting to login page.');
            setTimeout(() => {
                // In a real application, you would clear session data and redirect to a login page.
                // window.location.href = 'index.html'; 
            }, 1000);
        }

        // Initialize functionality on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial active nav item (Dashboard) and show its section
            const initialNavItem = document.querySelector('.nav-item.active');
            if (initialNavItem) {
                // Manually trigger the section display for the initially active item
                // This ensures charts and tables are initialized correctly on load
                const sectionId = initialNavItem.getAttribute('onclick').match(/'([^']+)'/)[1];
                // Pass the initialNavItem as the element to activate
                showSection(null, sectionId); // Pass null for event, as it's not a direct click
            } else {
                // Fallback: if no active class, default to dashboard
                const defaultDashboard = document.getElementById('dashboard');
                if (defaultDashboard) {
                    defaultDashboard.classList.add('active');
                    initZonePerformanceChart(); // Initialize dashboard chart if it's the default
                }
            }
        });
    </script>
</body>
</html>
